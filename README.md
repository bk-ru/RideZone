# Прогнозирование оптимальных зон для размещения станций проката микротранспорта

RideZone AI - платформа сбора геоданных Москвы из OpenStreetMap, для прогнозирования спроса на микротранспорт и формирования рекомендаций по размещению станций.

![Интерфейс](img/img1.png)

## 📜 Оглавление

- [🎯 О проекте](#-о-проекте)
- [🛠️ Используемые технологии](#-используемые-технологии)
- [⚙️ Установка и запуск](#-установка-и-запуск)
- [💾 Данные](#-данные)
- [🤖 Модели](#-модели)
- [📊 Результаты](#-результаты)
- [🗂️ Структура проекта](#-структура-проекта)
- [💡 Примеры функционала](#-примеры-функционала)

## 🎯 О проекте

RideZone AI решает проблему неэффективного распределения станций проката: в одних районах доки простаивают, в других — наблюдается дефицит. Мы анализируем инфраструктуру, конкуренцию и демографию, чтобы выявить наиболее перспективные гексагоны.

**Проблема:** отсутствие объективной аналитики по спросу приводит к потерям выручки и неудобству для пользователей.

**Цель:** автоматически подбирать локации для новых станций, максимизируя использование инфраструктуры и доступность транспорта.

**Задачи:**
- собрать и очистить пространственные данные (OpenStreetMap);
- построить H3-сетку и инженерные признаки (инфраструктура, конкуренция, туризм, плотность населения);
- обучить модель RandomForest для прогноза спроса и расчёта композитного скоринга;
- визуализировать результат на карте города и в таблице рекомендаций.

## 🛠️ Используемые технологии

- Python 3.12
- pandas, numpy
- scikit-learn (RandomForestRegressor, Pipeline)
- geopandas, osmnx, h3
- matplotlib / Chart.js / Leaflet
- Jupyter Notebook, CLI-утилиты

## ⚙️ Установка и запуск

1. **Клонирование репозитория**
   ```bash
   git clone https://github.com/<ваш-логин>/RideZone_AI.git
   cd RideZone_AI
   ```
2. **Виртуальное окружение**
   ```bash
   python -m venv venv
   venv/Scripts/activate        # Windows
   # source venv/bin/activate   # macOS/Linux
   ```
3. **Установка зависимостей**
   ```bash
   pip install -e .[dev]
   ```
4. **Подготовка данных и модели**
   ```bash
   python scripts/build_moscow_dataset.py --resolution 8   # OSM → CSV
   ridezone-ai --top-k 8                                   # обучение + отчёт
   python scripts/build_dashboard_data.py --output web/dashboard_data.json
   ```
5. **Запуск дашборда**
   ```bash
   cd web
   python -m http.server 8000
   # открыть http://localhost:8000/dashboard.html
   ```

## 💾 Данные

- **Источник:** OpenStreetMap (через osmnx). Для тестов доступен синтетический CSV (`scripts/generate_dataset.py`).
- **Описание:** H3-гексагоны Москвы (resolution 8) с признаками инфраструктуры (велополосы, остановки, торговля, жильё, POI, парковки, конкуренты) и целевой переменной `avg_daily_trips`.
- **Предобработка:** перепроецирование, расчёт длин/площадей, агрегация по гексагонам, нормализация и вычисление производных метрик (friendly score, growth index, competition pressure).

## 🤖 Модели

- **Выбор:** RandomForestRegressor, обёрнутый в sklearn Pipeline (SimpleImputer + StandardScaler + OneHotEncoder).
- **Обучение и оценка:** train/test split, метрики MAE, RMSE, R². Прогнозы передаются в оптимизатор, где рассчитывается композитный скоринг и confidence для каждой зоны.

## 📊 Результаты

- **Ключевой вывод 1:** максимальный спрос концентрируется вдоль центрального транспортного кольца и в районах с развитой велоинфраструктурой.
- **Ключевой вывод 2:** мультикритериальная модель позволяет ранжировать до 10 перспективных зон, балансируя спрос, инфраструктуру и конкуренцию.

## 🗂️ Структура проекта

```
RideZone_AI/
├─ ridezone_ai/
│  ├─ cli.py
│  ├─ config.py
│  ├─ dashboard.py
│  ├─ data_loader.py
│  ├─ feature_engineering.py
│  ├─ modeling.py
│  ├─ optimizer.py
│  ├─ osm_moscow_builder.py
│  ├─ pipeline.py
│  └─ reporting.py
├─ scripts/
│  ├─ build_dashboard_data.py
│  ├─ build_moscow_dataset.py
│  └─ generate_dataset.py
├─ web/
│  ├─ dashboard.html
│  └─ dashboard_data.json
├─ tests/
│  └─ test_pipeline.py
├─ README.md
└─ pyproject.toml
```

## 💡 Примеры функционала

#### Карта зон и легенда  ![Карта зон и легенда](img/img2.png)
На карте Leaflet отображаются исходные гексагоны, тепловая карта спроса, кластеры округов и значки рекомендуемых станций. Легенда объясняет каждый цвет, поэтому аналитик сразу видит, где спрос высокий, а где инфраструктура требует развития.

#### Прогноз спроса  ![Прогноз спроса](img/img3.png)
Столбчатый график сравнивает текущий трафик и прогноз модели по топ-зонам. Разрыв между синим и розовым столбцом показывает потенциальный прирост после установки станции.

#### Таблица рекомендаций  ![Таблица рекомендаций](img/img4.png)
Каждая строка таблицы описывает конкретный гексагон: координаты, прогноз спроса и факторы (спрос, инфраструктура, конкуренция, рост). Кнопка «Рекомендуется» сигнализирует менеджеру, что зона прошла все фильтры confidence.
